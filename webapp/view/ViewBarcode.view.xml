<mvc:View controllerName="zbarcodescan.controller.ViewBarcode"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns:ndc="sap.ndc"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <content>
            <Panel headerText="Barcode Scanner"
                class="sapUiResponsiveMargin" width="auto">
                <content>
                    <f:SimpleForm layout="ColumnLayout" editable="true">
                        <f:content>
                        <core:Title text="Input"/>    
                            <Label text="Default Plant"/>
                            <ComboBox id="defPlant"
                            selectedKey="{view>/selectedPlant}"
                            showSecondaryValues="true"
                            selectionChange="onPlantChange"
                            items="{
                                path: 'plant>/'}">
                            <core:ListItem
                                key="{plant>Werks}"
                                text="{plant>Name1}"
                                additionalText="{plant>Werks}"/>
                            </ComboBox>                        
                            <Label text="Default Location"/>
                            <ComboBox id="defLoc"
                            selectedKey="{view>/selectedLocation}"
                            selectionChange="onLocationChange"
                            showSecondaryValues="true"
                            items="{
                                path: 'filteredLocations>/'}">
                            <core:ListItem 
                                key="{filteredLocations>Stand}" 
                                text="{filteredLocations>Ktext}"
                                additionalText="{filteredLocations>Stand}"/>
                            </ComboBox>
                            <Label text="Default Room"/>
                            <Input id="defRoom"
                                liveChange="onRoomChange"                                
                                editable="true" value=""/>
                        </f:content>
                    </f:SimpleForm>                                
                    <f:SimpleForm layout="ColumnLayout" editable="true">
                        <f:toolbar>
                            <Toolbar >
                                <content>
                                    <ndc:BarcodeScannerButton
                                        id="barcodeScannerButton"
                                        scanSuccess="onScanSuccess"
                                        scanFail="onScanError"
                                        inputLiveUpdate="onScanLiveupdate"
                                        dialogTitle="Barcode Scanner Button" 
                                    />                                    
                                </content>
                            </Toolbar>
                        </f:toolbar>
                        <f:content>
                            <core:Title text="Data"/>
                            <Label text="Number"/>
                            <Input id="barcodeID" editable="false" value=""/>
                            <Label text="Asset Number"/>
                            <Input id="assetNo" editable="false" value="{header>/Anln1}"/>
                            <Label text="Asset Sub-Number"/>
                            <Input id="assetSubNo" editable="false" value="{header>/Anln2}"/>
                            <Label text="Asset Description"/>
                            <Input id="assetDesc" editable="false" value="{header>/Txt50}"/>
                            <Label text="Cost Center"/>
                            <Input id="costCenter" editable="false" value="{header>/Kostl}"/>
                            <Label text="Plant"/>
                            <Input id="plant" editable="false" value="{header>/Name1}"/>
                            <Label text="Location"/>
                            <Input id="location" editable="false" value="{header>/Ktext}"/>                            
                            <Label text="Room"/>
                            <Input id="room" editable="false" value="{header>/Raumn}"/>
                            <Label text="Last Inventory on"/>
                            <Input id="inventDate" editable="false" value="{header>/Ivdat}"/>
                            <Label text="Asset serial"/>
                            <Input id="serialNo" editable="false" value="{header>/Sernr}"/>
                            <Label text="Inventory note"/>
                            <Input id="invNote" editable="true" value="{header>/Invzu}"/>
                            <Label text=""/>
                            <Text id="assetText" text="" />
                        </f:content>
                    </f:SimpleForm>
                    <List items="{/Barcode}"
                        growing="true"
                        growingThreshold="5">
                        <items>
                            <StandardListItem 
                                title="{AssetNumber}"
                                description="{AssetDescription}"/>
                        </items>
                    </List>
                </content>
            </Panel>
        </content>
        <footer>
            <Toolbar>
                <content>
                    <ToolbarSpacer/>
                    <Button text="Update"
                        type="Emphasized"
                        press="onUpdatePress"/>
                    <Button text="Close"
                        type="Reject"
                        press="onClosePress"/>   
                </content>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>
